<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cloudj Login</title><!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Cloudj Login</title>
        <link href="//cdn.bootcss.com/bootstrap/2.3.1/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="//cdn.bootcss.com/bootstrap/2.3.1/css/bootstrap.css" rel="stylesheet">
        <link href="/static/css/style.css" rel="stylesheet" >
    </head>
<body class="login">
<div class="login-div">
    <div style="text-align: center"><h2>Cloud in Django</h2></div>
    <div id="err" class="error-div" style="display:none"></div>
    <form class="row-fluid" id="Form">
        <label class="login-label">用户名</label>
        <input class="input span12 login-input" type="text" name="username">
        <label class="login-label">邮箱</label>
        <input class="input span12 login-input" type="email" name="email">
        <label class="login-label">密码</label>
        <input class="input span12 login-input" type="password" name="password" id="password">
        <label class="login-label">确认密码</label>
        <input class="input span12 login-input" type="password" id="confirm_password">
        <input class="span12 btn-large btn-info signup-btn" type="submit" value="注    册" id="signupSubmit">
        {% csrf_token %}
    </form>
    <div class="signupa"><a href="/login">登录</a></div>
</div>
<script src="//cdn.bootcss.com/jquery/1.12.0/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/2.3.1/js/bootstrap.min.js"></script>
<script>
$(document).ready(function () {
        $("#signupSubmit").click(function () {
            if($("#password").val()!=$("#confirm_password").val()){
                $("#err").show();
                $("#err").text('密码输入不一致！')
                return false;
            }
            var options = {
                url: '/signup',
                type: 'post',
                dataType: 'text',
                data: $("#Form").serialize(),
                success: function (data) {
                    if(data=='success'){
                        window.location.href='/'
                    }else{
                        $("#err").show();
                        $("#err").text(data)
                    }
                }
            };
            $.ajax(options);
            return false;
        });
    });
</script>
</body>
</html>